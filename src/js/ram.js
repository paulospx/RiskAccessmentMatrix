var HzRam=function(){function t(){function t(t){t.append("rect").attr("x",function(t,e){return n*e}).attr("fill",function(t,e,a){var r=t+a*s,n="#EEE";return"object"==typeof l[r]&&(n=l[r].color),n}).attr("stroke-width","0.5").attr("width",g).attr("stroke","black").attr("height",v),t.append("text").attr("x",function(t){return t*g+g/3}).attr("y",function(){return v/2}).attr("font-size",function(t,e){return n<30?n/2:12}).attr("font-family","sans-serif").attr("color","#000").attr("width",g).attr("height",v).text(function(t,e,a){var r=t+a*s,n="NA";return"object"==typeof l[r]&&(n=l[r].text),n})}for(var e={left:50,top:100},a=l.length/s,u=n*s+e.left+e.left,m=n*a+e.top+e.top,y=d3.select(r),b=y.append("svg").attr("width",u).attr("height",m),g=n,v=n,h=[],w=0;w<a;w+=1)h.push(d3.range(s));var D=b.selectAll("g").data(h).enter().append("g").attr("transform",function(t,e){return"translate(0, "+n*e+")"}),A=D.selectAll("rect").data(function(t){return t}).enter().append("g").attr("transform","translate("+e.left+","+e.top+")");t(A),b.append("g").append("text").attr("class","ram-title").attr("x",e.left).attr("y",50).attr("style",'font-family: "Roboto", sans-serif;font-size: 22px;').text(o),b.append("g").append("text").attr("color","#DDD").attr("class","ram-subtitle").attr("x",e.left).attr("y",70).attr("style",'font-fam ily: "Roboto", sans-serif;font-size: 12px;fill:#999;').text(i),b.append("g").attr("writing-mode","tb-rl").append("text").attr("color","#DDD").attr("class","ram-subtitle").attr("x",e.left/2+10).attr("y",u-90).attr("style",'font-family: "Roboto", sans-serif;font-size: 16px;fill:#999;').text(p);var k=(a-s)*n;k<0&&(k=0),b.append("g").append("text").attr("color","#DDD").attr("class","ram-subtitle").attr("x",e.left).attr("y",u+k+20).attr("style",'font-family: "Roboto", sans-serif;font-size:10 px;fill:#999;').text(d),b.append("g").append("text").attr("color","#DDD").attr("class","ram-selected-text").attr("x",e.left).attr("y",u+k+40).attr("style",'font-family: "Roboto", sans-serif;font-size:9px;fill:#000;').text("Title"),b.append("g").append("text").attr("color","#DDD").attr("class","ram-selected-probability").attr("x",e.left).attr("y",u+k+50).attr("style",'font-family: "Roboto", sans-serif;font-size:9px;fill:#000;').text("Probability"),b.append("g").append("text").attr("color","#DDD").attr("class","ram-selected-consequence").attr("x",e.left).attr("y",u+k+60).attr("style",'font-family: "Roboto", sans-serif;font-size:9px;fill:#000;').text("Consequence"),b.selectAll("rect").on("mouseover",function(t,e,a){var r=l[e];x(r.probability,r.consequence,r.text,r.description),c&&(b.selectAll(".ram-selected-text").text(r.text),b.selectAll(".ram-selected-probability").text(r.probability),b.selectAll(".ram-selected-consequence").text(r.consequence))}).on("click",function(t,e,a){var r=l[e];f&&(b.selectAll(".ram-selected-text").text(r.text),b.selectAll(".ram-selected-probability").text(r.probability),b.selectAll(".ram-selected-consequence").text(r.consequence));d3.select(this).style();d3.selectAll("rect").attr("class",""),d3.select(this).attr("class","ram-selected")})}function e(){var t=d3.select("svg").attr("version",1.1).attr("xmlns","http://www.w3.org/2000/svg").node().parentNode.innerHTML,e="data:image/svg+xml;base64,"+btoa(t),a='<img src="'+e+'">';d3.select("#svgdataurl").html(a),d3.select(".ram-selected").style("fill","#FFF").style("stroke-width","5");var r=document.querySelector("canvas"),l=r.getContext("2d"),s=new Image;s.src=e,s.onload=function(){l.drawImage(s,0,0);var t=r.toDataURL("image/png"),e='<img src="'+t+'">';d3.select("#pngdataurl").html(e);var a=document.createElement("a");a.download="risk-access-matrix.png",a.href=t,a.click()}}function a(t){void 0!==t&&(void 0!=t.title&&(o=t.title),void 0!=t.xaxis&&(d=t.xaxis),void 0!=t.yaxis&&(p=t.yaxis),i=t.subtitle,r=t.id,l=t.list,s=t.matrix_size,n=t.square_size,u=t.onclick,x=t.onhover,void 0!=t.show_hover&&(c=t.show_hover),void 0!=t.show_clicked&&(f=t.show_clicked))}var r="#chart",l=[],s=5,n=50,o="Risk Assessment Matrix",i="",c=!1,f=!0,d="Consequence",p="Probability",x=function(t,e,a,r){},u=function(t,e,a,r){};return{setOptions:function(t){a(t)},show:function(e){a(e),t()},download:function(){return e()}}}();